#ifndef __TETRAD_H__
#define __TETRAD_H__


#include "image.hpp"


const int TETRAD_NUM = 7;
const int TETRAD_ROT = 4;
const int TETRAD_W = 4;
const int TETRAD_H = 4;
const int TETRAD[TETRAD_NUM][TETRAD_ROT][TETRAD_W][TETRAD_H] = {
  // I-block
  {
    {
      { 1, 1, 1, 1 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 }
    },
    {
      { 1, 1, 1, 1 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 },
      { 1, 0, 0, 0 }
    },
  },
  // J-block
  {
    {
      { 2, 2, 2, 0 },
      { 0, 0, 2, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 2, 2, 0, 0 },
      { 2, 0, 0, 0 },
      { 2, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 2, 0, 0, 0 },
      { 2, 2, 2, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 2, 0, 0 },
      { 0, 2, 0, 0 },
      { 2, 2, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
  // L-block
  {
    {
      { 3, 3, 3, 0 },
      { 3, 0, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 3, 0, 0, 0 },
      { 3, 0, 0, 0 },
      { 3, 3, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 0, 3, 0 },
      { 3, 3, 3, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 3, 3, 0, 0 },
      { 0, 3, 0, 0 },
      { 0, 3, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
  // O-block
  {
    {
      { 4, 4, 0, 0 },
      { 4, 4, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 4, 4, 0, 0 },
      { 4, 4, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 4, 4, 0, 0 },
      { 4, 4, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 4, 4, 0, 0 },
      { 4, 4, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
  // S-block
  {
    {
      { 0, 5, 5, 0 },
      { 5, 5, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 5, 0, 0, 0 },
      { 5, 5, 0, 0 },
      { 0, 5, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 5, 5, 0 },
      { 5, 5, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 5, 0, 0, 0 },
      { 5, 5, 0, 0 },
      { 0, 5, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
  // T-block
  {
    {
      { 6, 0, 0, 0 },
      { 6, 6, 0, 0 },
      { 6, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 6, 0, 0 },
      { 6, 6, 6, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 6, 0, 0 },
      { 6, 6, 0, 0 },
      { 0, 6, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 6, 6, 6, 0 },
      { 0, 6, 0, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
  // Z-block
  {
    {
      { 7, 7, 0, 0 },
      { 0, 7, 7, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 7, 0, 0 },
      { 7, 7, 0, 0 },
      { 7, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 7, 7, 0, 0 },
      { 0, 7, 7, 0 },
      { 0, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
    {
      { 0, 7, 0, 0 },
      { 7, 7, 0, 0 },
      { 7, 0, 0, 0 },
      { 0, 0, 0, 0 }
    },
  },
};


class Tetrad : public Image {
  private:
    int type;
    int x_pos;
    int y_pos;
    int z_pos;
    int time;
    int speed;
    int color;
    
  public:
    Tetrad(void);
    void init(void);
    void move(class Tilemap &tilemap, int x, int y, int z);
    void drop(class Tilemap &tilemap);
    void update(class Tilemap &tilemap);
    void draw(BITMAP *bmp);
};


#endif
